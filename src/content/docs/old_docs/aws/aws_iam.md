---
title: IAM
description: Placeholder content for AWS IAM.
order: 3
---

# AWS IAM

Below are detailed notes on how to create **IAM (Identity and Access Management)** users in AWS, assign services, and manage permissions. These notes are structured to provide a clear, step-by-step understanding for beginners and intermediate users.

---

### **What is AWS IAM?**
- **Definition**: IAM is an AWS service that allows you to manage access to AWS resources securely.
- **Purpose**: Control who (users, groups, roles) can do what (permissions) with which AWS services/resources.
- **Key Features**:
  - Fine-grained access control.
  - Multi-factor authentication (MFA).
  - Temporary credentials via roles.
- **Core Components**:
  - **Users**: Individuals or applications with AWS credentials.
  - **Groups**: Collections of users sharing the same permissions.
  - **Roles**: Temporary access for AWS services or users (no credentials attached).
  - **Policies**: JSON documents defining permissions.

---

### **Prerequisites**
- **AWS Account**: Sign up at [aws.amazon.com](https://aws.amazon.com).
- **Root User Access**: Initial login with root credentials (avoid using root for daily tasks).
- **AWS Console Access**: Log in to the AWS Management Console.

---

### **Steps to Create IAM Users**

#### **1. Via AWS Management Console**
1. **Navigate to IAM**:
   - Log in to the AWS Console.
   - Go to **Services** > **IAM**.
2. **Create a User**:
   - In the left sidebar, click **Users** > **Add Users**.
   - **User Name**: Enter a unique name (e.g., `john-doe`).
   - **Access Type**:
     - **Programmatic Access**: Provides Access Key ID and Secret Access Key (for CLI, SDKs).
     - **AWS Management Console Access**: Allows login via the console.
       - **Autogenerated Password**: AWS creates a password.
       - **Custom Password**: Set your own.
       - Check **Require password reset** for security.
   - Click **Next: Permissions**.
3. **Set Permissions** (see Assigning Permissions section below).
4. **Add Tags** (optional):
   - Key-value pairs (e.g., `Department: Engineering`).
   - Click **Next: Review**.
5. **Review and Create**:
   - Review settings and click **Create User**.
   - Download the `.csv` file with credentials (Access Key/Secret Key) or note the console login URL/password.

#### **2. Via AWS CLI**
- Command:
  ```bash
  aws iam create-user --user-name john-doe
  ```
- Add Console Access (optional):
  ```bash
  aws iam create-login-profile --user-name john-doe --password 'MySecurePassword123!' --password-reset-required
  ```
- Generate Access Keys (optional):
  ```bash
  aws iam create-access-key --user-name john-doe
  ```
  - Output includes `AccessKeyId` and `SecretAccessKey`.

---

### **Assigning Services and Permissions**

#### **1. Understanding Permissions**
- Permissions are defined in **IAM Policies** (JSON documents).
- Policies specify:
  - **Effect**: `Allow` or `Deny`.
  - **Action**: AWS service actions (e.g., `s3:PutObject`).
  - **Resource**: The AWS resource ARN (e.g., `arn:aws:s3:::my-bucket/*`).

#### **2. Methods to Assign Permissions**
##### **Option 1: Attach Existing Policies**
- **Console**:
  - During user creation or later (Users > Select User > Add Permissions):
    - Choose **Attach existing policies directly**.
    - Select AWS-managed policies (e.g., `AmazonS3FullAccess`, `AmazonEC2ReadOnlyAccess`).
    - Click **Next: Review** > **Add Permissions**.
- **CLI**:
  ```bash
  aws iam attach-user-policy --user-name john-doe --policy-arn arn:aws:iam::aws:policy/AmazonS3FullAccess
  ```

##### **Option 2: Create and Attach a Custom Policy**
- **Console**:
  1. Go to **Policies** > **Create Policy**.
  2. Use **Visual Editor** or **JSON**:
     - Example JSON:
       ```json
       {
           "Version": "2012-10-17",
           "Statement": [
               {
                   "Effect": "Allow",
                   "Action": [
                       "s3:PutObject",
                       "s3:GetObject"
                   ],
                   "Resource": "arn:aws:s3:::my-unique-bucket-123/*"
               }
           ]
       }
       ```
  3. Click **Next: Tags** (optional) > **Next: Review**.
  4. Name the policy (e.g., `S3CustomAccess`) and create it.
  5. Attach to user:
     - Users > Select User > Add Permissions > Attach Policy.
- **CLI**:
  ```bash
  aws iam create-policy --policy-name S3CustomAccess --policy-document file://policy.json
  aws iam attach-user-policy --user-name john-doe --policy-arn arn:aws:iam::ACCOUNT-ID:policy/S3CustomAccess
  ```
  - Replace `ACCOUNT-ID` with your AWS account ID.

##### **Option 3: Add User to a Group**
- **Console**:
  1. Go to **Groups** > **Create Group**.
  2. Name the group (e.g., `S3Users`).
  3. Attach policies (e.g., `AmazonS3FullAccess`).
  4. Add users to the group during creation or later:
     - Groups > Select Group > Add Users to Group.
- **CLI**:
  ```bash
  aws iam create-group --group-name S3Users
  aws iam attach-group-policy --group-name S3Users --policy-arn arn:aws:iam::aws:policy/AmazonS3FullAccess
  aws iam add-user-to-group --group-name S3Users --user-name john-doe
  ```

##### **Option 4: Inline Policy (Directly on User)**
- **Console**:
  - Users > Select User > Add Inline Policy.
  - Add JSON (e.g., as above) and save.
- **CLI**:
  ```bash
  aws iam put-user-policy --user-name john-doe --policy-name InlineS3Access --policy-document file://policy.json
  ```

---

### **Managing IAM Users and Permissions**

#### **1. Update Permissions**
- Add/remove policies via the console or CLI as needed.
- Example (CLI):
  ```bash
  aws iam detach-user-policy --user-name john-doe --policy-arn arn:aws:iam::aws:policy/AmazonS3FullAccess
  ```

#### **2. Enable MFA**
- **Console**:
  - Users > Select User > Security Credentials > Assign MFA Device.
  - Use a virtual MFA app (e.g., Google Authenticator) or hardware device.
- **CLI**: Not directly supported; use the console for MFA setup.

#### **3. Delete a User**
- **Console**:
  - Users > Select User > Delete.
  - Remove from groups and detach policies first if needed.
- **CLI**:
  ```bash
  aws iam delete-user --user-name john-doe
  ```
  - Remove access keys first if created:
    ```bash
    aws iam delete-access-key --access-key-id ACCESS_KEY_ID --user-name john-doe
    ```

#### **4. List Policies and Permissions**
- **CLI**:
  - List attached user policies:
    ```bash
    aws iam list-attached-user-policies --user-name john-doe
    ```
  - List inline policies:
    ```bash
    aws iam list-user-policies --user-name john-doe
    ```

---

### **Best Practices**
- **Least Privilege**: Grant only the permissions needed (e.g., `s3:GetObject` instead of `s3:*`).
- **Use Groups**: Manage permissions via groups rather than individual users.
- **Avoid Root User**: Create IAM users for daily tasks; secure root with MFA.
- **Rotate Credentials**: Regularly update access keys and passwords.
- **Monitor**: Use AWS CloudTrail to track IAM actions.
- **Policy Naming**: Use descriptive names (e.g., `S3ReadOnly-JohnDoe`).

---

### **Example Workflow**
1. **Create User**:
   ```bash
   aws iam create-user --user-name alice
   ```
2. **Create Policy**:
   - `s3-policy.json`:
     ```json
     {
         "Version": "2012-10-17",
         "Statement": [
             {
                 "Effect": "Allow",
                 "Action": "s3:ListBucket",
                 "Resource": "arn:aws:s3:::my-unique-bucket-123"
             }
         ]
     }
     ```
   ```bash
   aws iam create-policy --policy-name S3ListAccess --policy-document file://s3-policy.json
   ```
3. **Attach Policy**:
   ```bash
   aws iam attach-user-policy --user-name alice --policy-arn arn:aws:iam::ACCOUNT-ID:policy/S3ListAccess
   ```
4. **Generate Access Keys**:
   ```bash
   aws iam create-access-key --user-name alice
   ```

---

### **Troubleshooting**
- **Access Denied**: Verify policy ARN, resource ARN, and user permissions.
- **Policy Too Large**: AWS limits inline policies to 2,048 characters; use managed policies instead.
- **Credentials Not Working**: Ensure keys are active and correctly configured in `~/.aws/credentials`.

---

These notes provide a comprehensive guide to creating IAM users, assigning services, and managing permissions. Let me know if you need help with a specific scenario!
